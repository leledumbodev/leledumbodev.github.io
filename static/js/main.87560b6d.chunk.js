(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){var r=n(40),o=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(n(41)),i=o(n(42)),a=o(n(43)),u=o(n(44)),s=o(n(45)),f=r(n(1)),c=n(32),d=o(n(130)),h=o(n(131)),m=n(132),p=n(152),y=n(153),v=y.HOST,w=function(e){function t(){var e;return(0,l.default)(this,t),(e=(0,a.default)(this,(0,u.default)(t).call(this))).state={show:"list",rows1:[],rows2:[]},e}return(0,s.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this;this._tick=setInterval(function(){return e.refresh()},1e3)}},{key:"componentWillUnmount",value:function(){this._tick&&clearInterval(this._tick),this._busyRefresh&&(this._busyRefresh=null)}},{key:"refresh",value:function(){var e=this;this._busyRefresh||(this._busyRefresh=!0,this.refreshList().then(function(){return e.refreshList2()}).then(function(){e._busyRefresh=!1}))}},{key:"refreshList",value:function(){var e=this;return this.getKDE().then(function(t){if(t){for(var n=[],r=0;r<t.length;r++){var o=t[r],l=o.code,i=o.species,a=o.production,u=o.byCatch,s=o.createdTimeStamp,f=l,c="species:"+i+" prod:"+a+" byCatch:"+u,d="created on"+p(s).format("DD MMM YYYY, HH:mm:ss");n.push({id:o.code,row1:f,row2:c,row3:d,obj:o})}e.setState({rows1:n})}})}},{key:"refreshList2",value:function(){var e=this;return this.getVerifiedKDE().then(function(t){if(t){for(var n=[],r=0;r<t.length;r++){var o=t[r],l=o.code,i=o.species,a=o.production,u=o.byCatch,s=o.verifiedBy.split("#")[1],f=o.createdTimeStamp,c=p(f).format("DD MMM YYYY, HH:mm:ss"),d=o.verifiedTimeStamp,h=l,m="species:"+i+" prod:"+a+" byCatch:"+u,y="verified by:"+s+("\ncreated on"+c+"\nverified on:"+p(d).format("DD MMM YYYY, HH:mm:ss"));n.push({id:o.code,row1:h,row2:m,row3:y,obj:o})}e.setState({rows2:n})}})}},{key:"onClickVerify",value:function(e){var t=this;console.log(e),this.setState({show:"busy"});var n=e.code;this.postVerifyKDE(n).then(function(e){e?(y.alert("Transaction success!"),t.setState({show:"list"})):(y.alert("Transaction failed!"),t.setState({show:"list"}))})}},{key:"render",value:function(){var e,t=this;if("busy"===this.state.show)e=f.default.createElement(c.View,{style:{flex:1,alignItems:"center",justifyContent:"center"}},f.default.createElement(c.ActivityIndicator,null));else{var n=this.state.rows1;e=f.default.createElement(c.View,{style:{flex:1}},f.default.createElement(h.default,{rows:n,onClickQrCode:function(e){return t.onClickVerify(e)},mode:"neptune"}))}var r=this.state.rows2,o=f.default.createElement(c.View,{style:{flex:1}},f.default.createElement(h.default,{rows:r,onClickQrCode:function(e){return console.log(e)},mode:"non-neptune"}));return f.default.createElement(c.View,{style:{flex:1}},f.default.createElement(d.default,{title:"VERIFIKATOR MENU",email:"neptune@sea.com",history:this.props.history}),f.default.createElement(c.View,{style:{flex:1,flexDirection:"row"}},f.default.createElement(c.View,{style:{flex:1,padding:10}},f.default.createElement(c.Text,{style:{fontWeight:"bold",textAlign:"center"}},"Unverified KDE(s)"),e),f.default.createElement(c.View,{style:{flex:1,padding:10}},f.default.createElement(c.Text,{style:{fontWeight:"bold",textAlign:"center"}},"Verified KDE(s)"),o)))}},{key:"getKDE",value:function(){var e=v+"/api/KDE";return console.log(e),new Promise(function(t,n){m.get(e).then(function(e){t(e.data)}).catch(function(e){console.error(e),t(null)})})}},{key:"getVerifiedKDE",value:function(){var e=v+"/api/VerifiedKDE";return new Promise(function(t,n){m.get(e).then(function(e){t(e.data)}).catch(function(e){console.error(e),t(null)})})}},{key:"postVerifyKDE",value:function(e){var t=v+"/api/VerifyKDE";return new Promise(function(n,r){m.post(t,{$class:"com.altermyth.mynetwork.VerifyKDE",kde:"resource:com.altermyth.mynetwork.KDE#"+e,verificator:"resource:com.altermyth.mynetwork.Verificator#neptune@sea.com"}).then(function(e){n(!0)}).catch(function(e){console.log(e),n(!1)})})}}]),t}(f.Component);t.default=w},130:function(e,t,n){var r=n(40),o=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(n(41)),i=o(n(42)),a=o(n(43)),u=o(n(44)),s=o(n(45)),f=r(n(1)),c=n(32),d=function(e){function t(){var e;return(0,l.default)(this,t),(e=(0,a.default)(this,(0,u.default)(t).call(this))).state={},e}return(0,s.default)(t,e),(0,i.default)(t,[{key:"doLogout",value:function(){}},{key:"render",value:function(){var e=this;f.default.createElement(c.Button,{style:{flex:1},title:"EXIT",onPress:function(){return e.doLogout()},color:"gray"});return null,f.default.createElement(c.View,{style:{flexDirection:"row",paddingHorizontal:5,paddingVertical:10,borderBottomWidth:1}},f.default.createElement(c.View,{style:{flexDirection:"column",flex:1}},f.default.createElement(c.Text,{style:{fontWeight:"bold"}},this.props.title),f.default.createElement(c.Text,null,this.props.email)),f.default.createElement(c.View,null,null))}}]),t}(f.Component);t.default=d},131:function(e,t,n){var r=n(40),o=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(n(41)),i=o(n(42)),a=o(n(43)),u=o(n(44)),s=o(n(45)),f=r(n(1)),c=n(32),d=function(e){function t(){var e;return(0,l.default)(this,t),(e=(0,a.default)(this,(0,u.default)(t).call(this))).state={height:0},e}return(0,s.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){}},{key:"renderRows",value:function(e){var t=this,n="SHOW QRCODE";return"supplier"===this.props.mode&&(n="SELL FISH"),"neptune"===this.props.mode&&(n="VERIFY"),f.default.createElement(c.FlatList,{style:{flex:1},data:e,keyExtractor:function(e,t){return""+e.id},ItemSeparatorComponent:function(){return f.default.createElement(c.View,{style:{height:1,backgroundColor:"gainsboro"}})},renderItem:function(e){var r=e.item,o=e.index,l=f.default.createElement(c.View,{style:{alignItems:"center",justifyContent:"center"}},f.default.createElement(c.Button,{title:n,onPress:function(){return t.props.onClickQrCode(r.obj)}}));return"tracker"!==t.props.mode&&"non-neptune"!==t.props.mode||(l=null),f.default.createElement(c.View,{key:o,style:{paddingHorizontal:5,paddingVertical:10}},f.default.createElement(c.View,{style:{flexDirection:"row"}},f.default.createElement(c.View,{style:{flex:1}},f.default.createElement(c.Text,null,r.row1),f.default.createElement(c.Text,null,r.row2),f.default.createElement(c.Text,null,r.row3)),l))}})}},{key:"render",value:function(){var e=this;if(0===this.state.height)return f.default.createElement(c.View,{style:{flex:1},onLayout:function(t){var n=t.nativeEvent.layout.height;e.setState({height:n})}});var t=this.state.height,n=this.props.rows;return f.default.createElement(c.View,{style:{height:t,overflow:"hidden"}},this.renderRows(n))}}]),t}(f.Component);t.default=d},153:function(e,t,n){var r=n(32);e.exports.delay=function(e){return new Promise(function(t,n){setTimeout(function(){t()},e)})},e.exports.alert=function(e){"web"===r.Platform.OS&&alert(e)},e.exports.HOST="https://paketviral.herokuapp.com"},92:function(e,t,n){e.exports=n(93)},93:function(e,t,n){var r=n(28),o=r(n(1)),l=r(n(19));n(97);var i=r(n(99));l.default.render(o.default.createElement(i.default,null),document.getElementById("root"))},97:function(e,t,n){},99:function(e,t,n){(function(e){var r=n(40),o=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(n(41)),i=o(n(42)),a=o(n(43)),u=o(n(44)),s=o(n(45)),f=r(n(1)),c=n(32),d=n(156),h=o(n(129)),m=function(e){function t(){return(0,l.default)(this,t),(0,a.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,s.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return f.default.createElement(d.MemoryRouter,null,f.default.createElement(c.View,{style:{flex:1}},f.default.createElement(d.Route,{path:"/",exact:!0,component:h.default})))}}]),t}(f.Component),p=function(){return function(){return m}};"web"===c.Platform.OS&&(p=n(154).hot);var y=p(e)(m);t.default=y}).call(this,n(59)(e))}},[[92,2,1]]]);
//# sourceMappingURL=main.87560b6d.chunk.js.map