(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){var r=n(40),l=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(41)),a=l(n(42)),i=l(n(43)),u=l(n(44)),f=l(n(45)),s=r(n(1)),c=n(32),d=l(n(130)),h=l(n(131)),m=n(132),y=(n(152),n(153)),p=y.HOST,v=function(e){function t(){var e;return(0,o.default)(this,t),(e=(0,i.default)(this,(0,u.default)(t).call(this))).state={show:"list",rows1:[],rows2:[]},e}return(0,f.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this;this._tick=setInterval(function(){return e.refresh()},1e3)}},{key:"componentWillUnmount",value:function(){this._tick&&clearInterval(this._tick),this._busyRefresh&&(this._busyRefresh=null)}},{key:"refresh",value:function(){var e=this;this._busyRefresh||(this._busyRefresh=!0,this.refreshList().then(function(){return e.refreshList2()}).then(function(){e._busyRefresh=!1}))}},{key:"refreshList",value:function(){var e=this;return this.getKDE().then(function(t){if(t){for(var n=[],r=0;r<t.length;r++){var l=t[r],o=l.code,a="species:"+l.species,i="farm:"+l.farm+" byCatch:"+l.byCatch;n.push({id:l.code,row1:o,row2:a,row3:i,obj:l})}e.setState({rows1:n})}})}},{key:"refreshList2",value:function(){var e=this;return this.getVerifiedKDE().then(function(t){if(t){for(var n=[],r=0;r<t.length;r++){var l=t[r],o=l.code,a="species:"+l.species+" farm:"+l.farm+" byCatch:"+l.byCatch,i="verified by:"+l.verifiedBy.split("#")[1];n.push({id:l.code,row1:o,row2:a,row3:i,obj:l})}e.setState({rows2:n})}})}},{key:"onClickVerify",value:function(e){var t=this;console.log(e),this.setState({show:"busy"});var n=e.code;this.postVerifyKDE(n).then(function(e){e?(y.alert("Transaction success!"),t.setState({show:"list"})):(y.alert("Transaction failed!"),t.setState({show:"list"}))})}},{key:"render",value:function(){var e,t=this;if("busy"===this.state.show)e=s.default.createElement(c.View,{style:{flex:1,alignItems:"center",justifyContent:"center"}},s.default.createElement(c.ActivityIndicator,null));else{var n=this.state.rows1;e=s.default.createElement(c.View,{style:{flex:1}},s.default.createElement(h.default,{rows:n,onClickQrCode:function(e){return t.onClickVerify(e)},mode:"neptune"}))}var r=this.state.rows2,l=s.default.createElement(c.View,{style:{flex:1}},s.default.createElement(h.default,{rows:r,onClickQrCode:function(e){return console.log(e)},mode:"non-neptune"}));return s.default.createElement(c.View,{style:{flex:1}},s.default.createElement(d.default,{title:"VERIFIKATOR MENU",email:"neptune@sea.com",history:this.props.history}),s.default.createElement(c.View,{style:{flex:1,flexDirection:"row"}},s.default.createElement(c.View,{style:{flex:1,padding:10}},s.default.createElement(c.Text,{style:{fontWeight:"bold",textAlign:"center"}},"Unverified KDE(s)"),e),s.default.createElement(c.View,{style:{flex:1,padding:10}},s.default.createElement(c.Text,{style:{fontWeight:"bold",textAlign:"center"}},"Verified KDE(s)"),l)))}},{key:"getKDE",value:function(){var e=p+"/api/KDE";return console.log(e),new Promise(function(t,n){m.get(e).then(function(e){t(e.data)}).catch(function(e){console.error(e),t(null)})})}},{key:"getVerifiedKDE",value:function(){var e=p+"/api/VerifiedKDE";return new Promise(function(t,n){m.get(e).then(function(e){t(e.data)}).catch(function(e){console.error(e),t(null)})})}},{key:"postVerifyKDE",value:function(e){var t=p+"/api/VerifyKDE";return new Promise(function(n,r){m.post(t,{$class:"com.altermyth.mynetwork.VerifyKDE",kde:"resource:com.altermyth.mynetwork.KDE#"+e,verificator:"resource:com.altermyth.mynetwork.Verificator#neptune@sea.com"}).then(function(e){n(!0)}).catch(function(e){console.log(e),n(!1)})})}}]),t}(s.Component);t.default=v},130:function(e,t,n){var r=n(40),l=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(41)),a=l(n(42)),i=l(n(43)),u=l(n(44)),f=l(n(45)),s=r(n(1)),c=n(32),d=function(e){function t(){var e;return(0,o.default)(this,t),(e=(0,i.default)(this,(0,u.default)(t).call(this))).state={},e}return(0,f.default)(t,e),(0,a.default)(t,[{key:"doLogout",value:function(){}},{key:"render",value:function(){var e=this;s.default.createElement(c.Button,{style:{flex:1},title:"EXIT",onPress:function(){return e.doLogout()},color:"gray"});return null,s.default.createElement(c.View,{style:{flexDirection:"row",paddingHorizontal:5,paddingVertical:10,borderBottomWidth:1}},s.default.createElement(c.View,{style:{flexDirection:"column",flex:1}},s.default.createElement(c.Text,{style:{fontWeight:"bold"}},this.props.title),s.default.createElement(c.Text,null,this.props.email)),s.default.createElement(c.View,null,null))}}]),t}(s.Component);t.default=d},131:function(e,t,n){var r=n(40),l=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(41)),a=l(n(42)),i=l(n(43)),u=l(n(44)),f=l(n(45)),s=r(n(1)),c=n(32),d=function(e){function t(){var e;return(0,o.default)(this,t),(e=(0,i.default)(this,(0,u.default)(t).call(this))).state={height:0},e}return(0,f.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){}},{key:"renderRows",value:function(e){var t=this,n="SHOW QRCODE";return"supplier"===this.props.mode&&(n="SELL FISH"),"neptune"===this.props.mode&&(n="VERIFY"),s.default.createElement(c.FlatList,{style:{flex:1},data:e,keyExtractor:function(e,t){return""+e.id},ItemSeparatorComponent:function(){return s.default.createElement(c.View,{style:{height:1,backgroundColor:"gainsboro"}})},renderItem:function(e){var r=e.item,l=e.index,o=s.default.createElement(c.View,{style:{alignItems:"center",justifyContent:"center"}},s.default.createElement(c.Button,{title:n,onPress:function(){return t.props.onClickQrCode(r.obj)}}));return"tracker"!==t.props.mode&&"non-neptune"!==t.props.mode||(o=null),s.default.createElement(c.View,{key:l,style:{paddingHorizontal:5,paddingVertical:10}},s.default.createElement(c.View,{style:{flexDirection:"row"}},s.default.createElement(c.View,{style:{flex:1}},s.default.createElement(c.Text,null,r.row1),s.default.createElement(c.Text,null,r.row2),s.default.createElement(c.Text,null,r.row3)),o))}})}},{key:"render",value:function(){var e=this;if(0===this.state.height)return s.default.createElement(c.View,{style:{flex:1},onLayout:function(t){var n=t.nativeEvent.layout.height;e.setState({height:n})}});var t=this.state.height,n=this.props.rows;return s.default.createElement(c.View,{style:{height:t,overflow:"hidden"}},this.renderRows(n))}}]),t}(s.Component);t.default=d},153:function(e,t,n){var r=n(32);e.exports.delay=function(e){return new Promise(function(t,n){setTimeout(function(){t()},e)})},e.exports.alert=function(e){"web"===r.Platform.OS&&alert(e)},e.exports.HOST="https://paketviral.herokuapp.com"},92:function(e,t,n){e.exports=n(93)},93:function(e,t,n){var r=n(28),l=r(n(1)),o=r(n(19));n(97);var a=r(n(99));o.default.render(l.default.createElement(a.default,null),document.getElementById("root"))},97:function(e,t,n){},99:function(e,t,n){(function(e){var r=n(40),l=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(41)),a=l(n(42)),i=l(n(43)),u=l(n(44)),f=l(n(45)),s=r(n(1)),c=n(32),d=n(156),h=l(n(129)),m=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,f.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return s.default.createElement(d.MemoryRouter,null,s.default.createElement(c.View,{style:{flex:1}},s.default.createElement(d.Route,{path:"/",exact:!0,component:h.default})))}}]),t}(s.Component),y=function(){return function(){return m}};"web"===c.Platform.OS&&(y=n(154).hot);var p=y(e)(m);t.default=p}).call(this,n(59)(e))}},[[92,2,1]]]);
//# sourceMappingURL=main.15b4dabf.chunk.js.map